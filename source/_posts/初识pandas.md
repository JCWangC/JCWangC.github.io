---
title: 初识pandas
date: 2020-03-26 18:55:37
tags:
categories: 
- 数据分析

---
最近在处理一批仿真数据，简要记录下pandas基础命令。
# 创建、读取及存储
## 创建
导入库`import pandas as pd`
构造DataFrame最常用的方式是字典+列表

## 读取
读取文件格式为 `.xls`，
```python
df=pd.read_excel('原始文件.xlsx', sheet_name='Sheet1',usecols = [1,2,3])
```
读取文件格式为  `.csv`
```python
df=pd.read_csv('原始文件.csv', sheet_name='Sheet1',usecols = [1,2,3])
```
engine、header、sep、names

## 存储
```python
#输出excel文件
df.to_excel('输出文件.xlsx')
#输出csv文件
df.to_csv('输出文件.csv')
```

# 快速认识数据
## 查看数据，掐头看尾
```python
df.head()#查看默认的前5行
df.head(10)#表示查看前10行数据
```


```python
df.tail()#查看数据尾部的5行数据
df.tail(10)#表示查看后10行数据
```

## 格式查看

df.info()帮助我们一步摸清各列数据的类型，以及缺失情况：

```python
df.info()

```

## 统计信息概览
快速计算数值型数据的关键统计指标，像平均数、中位数、标准差等等。
```python
df.describe()
```
我们本来有5列数据，为什么返回结果只有两列？那是因为这个操作只针对数值型的列。其中count是统计每一列的有多少个非空数值，mean、std、min、max对应的分别是该列的均值、标准差、最小值和最大值，25%、50%、75%对应的则是分位数。
# 列的基本处理方式
这里，我们采用SQL四大法宝的逻辑来简单梳理针对列的基本处理方式——增、删、选、改。

温馨提示：使用Pandas时，尽量避免用行或者EXCEL操作单元格的思维来处理数据，要逐渐养成一种列向思维，每一列是同宗同源，处理起来是嗖嗖的快。
## 增
增加一列，用df['新列名'] = 新列值的形式，在原数据基础上赋值即可：


## 删
我们用drop函数制定删除对应的列，axis = 1表示针对列的操作，inplace为True，则直接在源数据上进行修改，否则源数据会保持原样。

## 选
想要选取某一列怎么办？df['列名']即可：

选取多列呢？需要用列表来传递：df[['第一列','第二列','第三列'..]]

## 改
好事多磨，复杂的针对特定条件和行列的筛选、修改，放在后面结合案例细讲，这里只讲一下最简单的更改：df['旧列名'] =  某个值或者某列值，就完成了对原列数值的修改。


# 常用数据类型及操作
## 字符串
字符串类型是最常用的格式之一了，Pandas中字符串的操作和原生字符串操作几乎一毛一样，唯一不同的是需要在操作前加上".str"。

小Z温馨提示：我们最初用df2.info()查看数据类型时，非数值型的列都返回的是object格式，和str类型深层机制上的区别就不展开了，在常规实际应用中，我们可以先理解为object对应的就是str格式，int64对应的就是int格式，float64对应的就是float格式即可。

在案例数据中，我们发现来源明细那一列，可能是系统导出的历史遗留问题，每一个字符串前面都有一个“-”符号，又丑又无用，所以把他给拿掉：


一般来说清洗之后的列是要替换掉原来列的：

## 数值型
数值型数据，常见的操作是计算，分为与单个值的运算，长度相等列的运算。

以案例数据为例，源数据访客数我们是知道的，现在想把所有渠道的访客都加上10000，怎么操作呢？

只需要选中访客数所在列，然后加上10000即可，pandas自动将10000和每一行数值相加，针对单个值的其他运算（减乘除）也是如此。
## 时间类型



